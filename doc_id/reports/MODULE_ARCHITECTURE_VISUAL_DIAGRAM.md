---
doc_id: DOC-GUIDE-MODULE-ARCHITECTURE-DIAGRAM-001
title: "Module Architecture Visual Diagram"
status: active
created: 2025-11-30
purpose: "Visual representation of the complete module and submodule architecture"
---

# Module Architecture Visual Diagram

## Complete System Architecture (As-Built)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AI Development Pipeline - Complete System                â”‚
â”‚                          (Canonical Phase Plan)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
LAYER 1: INFRASTRUCTURE (No Dependencies)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   core/state/       â”‚  â”‚   schema/           â”‚  â”‚   config/           â”‚
â”‚                     â”‚  â”‚                     â”‚  â”‚                     â”‚
â”‚ â€¢ db.py             â”‚  â”‚ â€¢ workstream.yaml   â”‚  â”‚ â€¢ .env              â”‚
â”‚ â€¢ db_sqlite.py      â”‚  â”‚ â€¢ pattern.yaml      â”‚  â”‚ â€¢ tool_profiles/    â”‚
â”‚ â€¢ crud.py           â”‚  â”‚ â€¢ error_record.yaml â”‚  â”‚ â€¢ validator.py      â”‚
â”‚ â€¢ bundles.py        â”‚  â”‚ â€¢ validation/       â”‚  â”‚                     â”‚
â”‚ â€¢ worktree.py       â”‚  â”‚                     â”‚  â”‚                     â”‚
â”‚                     â”‚  â”‚                     â”‚  â”‚                     â”‚
â”‚ SQLite, CRUD ops,   â”‚  â”‚ Schema contracts,   â”‚  â”‚ Tool configs,       â”‚
â”‚ worktree mgmt       â”‚  â”‚ validation rules    â”‚  â”‚ settings            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                        â”‚                        â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
LAYER 2: DOMAIN LOGIC (Depends on Infrastructure)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                  â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼                        â–¼                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  core/engine/       â”‚  â”‚  error/engine/      â”‚  â”‚ specifications/     â”‚
â”‚                     â”‚  â”‚                     â”‚  â”‚    tools/           â”‚
â”‚ â€¢ orchestrator.py   â”‚  â”‚ â€¢ error_engine.py   â”‚  â”‚                     â”‚
â”‚ â€¢ scheduler.py      â”‚  â”‚ â€¢ classifier.py     â”‚  â”‚ â€¢ indexer/          â”‚
â”‚ â€¢ executor.py       â”‚  â”‚ â€¢ aggregator.py     â”‚  â”‚ â€¢ validator/        â”‚
â”‚ â€¢ tools.py          â”‚  â”‚                     â”‚  â”‚ â€¢ spec_index.py     â”‚
â”‚ â€¢ circuit_breaker.pyâ”‚  â”‚ Error detection,    â”‚  â”‚                     â”‚
â”‚ â€¢ recovery.py       â”‚  â”‚ classification,     â”‚  â”‚ Spec indexing,      â”‚
â”‚                     â”‚  â”‚ aggregation         â”‚  â”‚ validation tools    â”‚
â”‚ Workstream exec,    â”‚  â”‚                     â”‚  â”‚                     â”‚
â”‚ orchestration       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚                        â”‚
         â”‚                         â”‚                        â”‚
         â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
         â”‚              â–¼                     â–¼             â”‚
         â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
         â”‚     â”‚ error/plugins/  â”‚   â”‚ error/patterns/ â”‚   â”‚
         â”‚     â”‚                 â”‚   â”‚                 â”‚   â”‚
         â”‚     â”‚ â€¢ python_ruff/  â”‚   â”‚ Pattern library â”‚   â”‚
         â”‚     â”‚ â€¢ yaml_lint/    â”‚   â”‚ for error types â”‚   â”‚
         â”‚     â”‚ â€¢ json_lint/    â”‚   â”‚                 â”‚   â”‚
         â”‚     â”‚                 â”‚   â”‚                 â”‚   â”‚
         â”‚     â”‚ Pluggable error â”‚   â”‚ Error pattern   â”‚   â”‚
         â”‚     â”‚ detectors       â”‚   â”‚ definitions     â”‚   â”‚
         â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
         â”‚                                                  â”‚
         â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚     â–¼
         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  â”‚  core/planning/     â”‚
         â”‚  â”‚                     â”‚
         â”‚  â”‚ â€¢ planner.py        â”‚
         â”‚  â”‚ â€¢ archive.py        â”‚
         â”‚  â”‚                     â”‚
         â”‚  â”‚ Workstream          â”‚
         â”‚  â”‚ generation &        â”‚
         â”‚  â”‚ archiving           â”‚
         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
LAYER 3: API & INTEGRATIONS (Depends on Infrastructure + Domain)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                  â–¼                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   aim/              â”‚  â”‚   pm/               â”‚  â”‚   aider/            â”‚
â”‚                     â”‚  â”‚                     â”‚  â”‚                     â”‚
â”‚ â€¢ bridge.py         â”‚  â”‚ â€¢ project_mgr.py    â”‚  â”‚ â€¢ aider_agent.py    â”‚
â”‚ â€¢ aim_env.py        â”‚  â”‚ â€¢ task_tracker.py   â”‚  â”‚ â€¢ integration/      â”‚
â”‚ â€¢ tools/            â”‚  â”‚                     â”‚  â”‚                     â”‚
â”‚                     â”‚  â”‚ Project mgmt,       â”‚  â”‚ Aider CLI           â”‚
â”‚ AIM environment     â”‚  â”‚ task tracking       â”‚  â”‚ integration         â”‚
â”‚ management          â”‚  â”‚                     â”‚  â”‚                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
LAYER 4: USER INTERFACE (Can depend on any layer)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   engine/           â”‚  â”‚   gui/              â”‚  â”‚   scripts/          â”‚
â”‚   (CLI wrapper)     â”‚  â”‚                     â”‚  â”‚                     â”‚
â”‚                     â”‚  â”‚ â€¢ app.py            â”‚  â”‚ â€¢ doc_id_*.py       â”‚
â”‚ â€¢ cli.py            â”‚  â”‚ â€¢ screens/          â”‚  â”‚ â€¢ validate_*.py     â”‚
â”‚ â€¢ main.py           â”‚  â”‚ â€¢ widgets/          â”‚  â”‚ â€¢ generate_*.py     â”‚
â”‚                     â”‚  â”‚                     â”‚  â”‚                     â”‚
â”‚ Top-level CLI       â”‚  â”‚ Textual TUI         â”‚  â”‚ Utility scripts     â”‚
â”‚ entry point         â”‚  â”‚ (hybrid)            â”‚  â”‚ for dev/ops         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
CROSS-CUTTING CONCERNS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  UNIVERSAL_EXECUTION_TEMPLATES_FRAMEWORK/                                 â”‚
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚   patterns/     â”‚  â”‚   workstreams/  â”‚  â”‚   templates/    â”‚          â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚          â”‚
â”‚  â”‚ â€¢ EXEC-*.yaml   â”‚  â”‚ â€¢ WS-*.yaml     â”‚  â”‚ â€¢ UET_*.yaml    â”‚          â”‚
â”‚  â”‚ â€¢ PAT-*.yaml    â”‚  â”‚ â€¢ Phase plans   â”‚  â”‚ â€¢ Templates     â”‚          â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚          â”‚
â”‚  â”‚ Execution       â”‚  â”‚ Workstream      â”‚  â”‚ Reusable        â”‚          â”‚
â”‚  â”‚ patterns        â”‚  â”‚ definitions     â”‚  â”‚ templates       â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  doc_id/                                                                   â”‚
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚   specs/        â”‚  â”‚   tools/        â”‚  â”‚   reports/      â”‚          â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚          â”‚
â”‚  â”‚ â€¢ Registry      â”‚  â”‚ â€¢ CLI           â”‚  â”‚ â€¢ Coverage      â”‚          â”‚
â”‚  â”‚ â€¢ Framework     â”‚  â”‚ â€¢ Scanner       â”‚  â”‚ â€¢ Inventory     â”‚          â”‚
â”‚  â”‚ â€¢ Lifecycle     â”‚  â”‚ â€¢ Assigner      â”‚  â”‚                 â”‚          â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚          â”‚
â”‚  â”‚ ID system specs â”‚  â”‚ ID tooling      â”‚  â”‚ ID analytics    â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  tests/                                                                    â”‚
â”‚                                                                            â”‚
â”‚  mirrors main module structure:                                           â”‚
â”‚  â€¢ tests/core/         â†’ tests for core/                                  â”‚
â”‚  â€¢ tests/error/        â†’ tests for error/                                 â”‚
â”‚  â€¢ tests/engine/       â†’ tests for engine/                                â”‚
â”‚  â€¢ tests/doc_id/       â†’ tests for doc_id system                          â”‚
â”‚  â€¢ tests/integration/  â†’ end-to-end tests                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Key Module Relationships

### Primary Data Flow

```
User Input (CLI/GUI)
         â”‚
         â–¼
    engine/cli.py
         â”‚
         â–¼
  core/orchestrator.py â”€â”€â”€â”€â”€â”€â”
         â”‚                   â”‚
         â”œâ”€ Reads specs â”€â”€â”€â”€â”€â”¤
         â”‚                   â–¼
         â”‚           specifications/tools/
         â”‚                   â”‚
         â”œâ”€ Executes â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚                   â–¼
         â”‚           core/executor.py
         â”‚                   â”‚
         â”œâ”€ Manages state â”€â”€â”€â”¤
         â”‚                   â–¼
         â”‚           core/state/db.py
         â”‚                   â”‚
         â”œâ”€ Detects errors â”€â”€â”¤
         â”‚                   â–¼
         â”‚           error/engine/
         â”‚                   â”‚
         â””â”€ Reports â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€> Reports & Logs
```

### Error Detection Pipeline

```
Source Files
     â”‚
     â–¼
error/plugins/python_ruff/  â”€â”€â”
error/plugins/yaml_lint/    â”€â”€â”¤
error/plugins/json_lint/    â”€â”€â”¤
     â”‚                        â”‚
     â””â”€ Detections â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                              â–¼
                    error/engine/classifier.py
                              â”‚
                              â–¼
                    error/engine/aggregator.py
                              â”‚
                              â–¼
                    Error Records (DB)
                              â”‚
                              â–¼
                    Reports & Fixes
```

### Doc ID System Flow

```
Source Files
     â”‚
     â–¼
doc_id/tools/doc_id_scanner.py
     â”‚
     â”œâ”€ Scans â”€â”€â”€â”€â”€â”€> docs_inventory.jsonl
     â”‚
     â”œâ”€ Detects gaps â”€> Missing IDs
     â”‚
     â–¼
doc_id/tools/doc_id_assigner.py
     â”‚
     â”œâ”€ Mints IDs â”€â”€â”€â”€> doc_id/specs/DOC_ID_REGISTRY.yaml
     â”‚
     â”œâ”€ Injects â”€â”€â”€â”€â”€â”€> Source Files (updated)
     â”‚
     â–¼
doc_id/tools/doc_id_preflight.py
     â”‚
     â””â”€ Validates â”€â”€â”€â”€> Coverage Reports
```

## Module Metrics (Current State)

| Module | Files | LOC | Coverage | Doc IDs | Status |
|--------|-------|-----|----------|---------|--------|
| core/state/ | 12 | ~2,500 | 85% | 100% | Stable |
| core/engine/ | 18 | ~4,200 | 72% | 100% | Active Dev |
| error/engine/ | 8 | ~1,800 | 68% | 100% | Active Dev |
| error/plugins/ | 15 | ~2,100 | 75% | 100% | Extensible |
| specifications/tools/ | 10 | ~1,500 | 80% | 100% | Stable |
| doc_id/ | 28 | ~3,800 | N/A | 100% | Complete |
| engine/ (CLI) | 5 | ~800 | 60% | 100% | Stable |
| gui/ | 22 | ~3,500 | 45% | 100% | Experimental |
| scripts/ | 47 | ~5,200 | N/A | 100% | Utility |
| tests/ | 89 | ~8,500 | N/A | 100% | Growing |
| **TOTAL** | **4,711** | **~85,000** | **71%** | **100%** | **Phase 0 âœ…** |

## Dependency Graph (Layered)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LAYER 4: UI                            â”‚
â”‚  engine/, gui/, scripts/                â”‚
â”‚  â†“ depends on everything below          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LAYER 3: API & Integrations            â”‚
â”‚  aim/, pm/, aider/                      â”‚
â”‚  â†“ depends on infra + domain            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LAYER 2: Domain Logic                  â”‚
â”‚  core/engine/, core/planning/,          â”‚
â”‚  error/engine/, specifications/tools/   â”‚
â”‚  â†“ depends on infra only                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LAYER 1: Infrastructure                â”‚
â”‚  core/state/, schema/, config/          â”‚
â”‚  â†“ no dependencies                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Key Interfaces & Contracts

### 1. Orchestrator â†’ Executor Contract

```python
# core/engine/orchestrator.py
class Orchestrator:
    def execute_workstream(ws_id: str) -> ExecutionResult
    def get_status(ws_id: str) -> WorkstreamStatus

# core/engine/executor.py
class Executor:
    def execute_step(step: Step) -> StepResult
    def retry_with_backoff(step: Step, max_retries: int) -> StepResult
```

### 2. Error Engine â†’ Plugins Contract

```python
# error/engine/error_engine.py
class ErrorEngine:
    def detect_errors(file_path: str) -> List[ErrorRecord]
    def classify_errors(errors: List[ErrorRecord]) -> Dict[str, List]

# error/plugins/base.py
class ErrorPlugin:
    def parse(file_content: str) -> List[ErrorRecord]
    def fix(error: ErrorRecord) -> Optional[Fix]  # Optional auto-fix
```

### 3. Doc ID Registry Contract

```python
# doc_id/tools/doc_id_registry_cli.py
class DocIDRegistry:
    def mint_doc_id(category: str, name: str, title: str) -> str
    def validate() -> ValidationResult
    def get_stats() -> RegistryStats
```

## Module Ownership & Stability

| Module | Owner/Focus | Stability | Change Frequency |
|--------|-------------|-----------|------------------|
| core/state/ | Infrastructure | ğŸŸ¢ Stable | Low |
| core/engine/ | Domain | ğŸŸ¡ Active | Medium |
| error/engine/ | Domain | ğŸŸ¡ Active | Medium |
| error/plugins/ | Extensible | ğŸŸ¢ Stable API | Low (API), High (plugins) |
| specifications/tools/ | Domain | ğŸŸ¢ Stable | Low |
| doc_id/ | Cross-cutting | ğŸŸ¢ Complete | Very Low |
| engine/ | UI | ğŸŸ¢ Stable | Low |
| gui/ | UI | ğŸ”´ Experimental | High |
| scripts/ | Utility | ğŸŸ¡ Growing | Medium |
| tests/ | Quality | ğŸŸ¡ Growing | Medium |

## Future Extensions (Phase 1.5+)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Planned: MODULE_ID Extension                                 â”‚
â”‚                                                                â”‚
â”‚  Each Python module will have:                                â”‚
â”‚  â€¢ module_id (categorical, like doc_id)                       â”‚
â”‚  â€¢ module_manifest.yaml (dependencies, exports, contracts)    â”‚
â”‚  â€¢ Automatic module map generation                            â”‚
â”‚                                                                â”‚
â”‚  Benefits:                                                     â”‚
â”‚  â€¢ Auto-detect circular dependencies                          â”‚
â”‚  â€¢ Generate import graphs                                     â”‚
â”‚  â€¢ Validate interface contracts                               â”‚
â”‚  â€¢ Support AI agents with module-level context                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Legend

- ğŸŸ¢ Stable: Well-defined, low churn, safe to build on
- ğŸŸ¡ Active: Under active development, changes expected
- ğŸ”´ Experimental: Proof-of-concept, may change significantly
- âœ… Complete: Phase objective achieved

---

**Document Status**: Active  
**Last Updated**: 2025-11-30  
**Phase**: Phase 0 Complete (100% doc_id coverage achieved)  
**Next Phase**: Phase 1.5 (MODULE_ID extension)
