{
  "phase_id": "PH-1D",
  "workstream_id": "WS-SPEC-MIGRATION",
  "phase_name": "Cross-Reference Resolver and Validator",
  "objective": "Build tooling to resolve cross-references between specs (UPS-*, PPS-*, DR-*) and validate reference integrity",
  "dependencies": ["PH-1A", "PH-1B", "PH-1C"],
  "file_scope": [
    "src/spec_resolver.py",
    "tests/test_spec_resolver.py"
  ],
  "pre_flight_checks": [
    {
      "check_id": "PFC-1D-001",
      "description": "All three spec files exist",
      "command": "test -f specs/UNIVERSAL_PHASE_SPEC_V1.md && test -f specs/PRO_PHASE_SPEC_V1.md && test -f specs/DEV_RULES_V1.md",
      "expected": "exit code 0"
    },
    {
      "check_id": "PFC-1D-002",
      "description": "All three index files exist",
      "command": "test -f specs/metadata/ups_index.json && test -f specs/metadata/pps_index.json && test -f specs/metadata/dr_index.json",
      "expected": "exit code 0"
    }
  ],
  "acceptance_tests": [
    {
      "test_id": "AT-1D-001",
      "description": "Resolver can parse all three spec formats",
      "command": "python src/spec_resolver.py --parse-all",
      "expected": "exit code 0"
    },
    {
      "test_id": "AT-1D-002",
      "description": "Resolver detects broken references",
      "command": "python src/spec_resolver.py --validate --spec specs/UNIVERSAL_PHASE_SPEC_V1.md",
      "expected": "reports 0 broken references"
    },
    {
      "test_id": "AT-1D-003",
      "description": "Can lookup section by ID",
      "command": "python src/spec_resolver.py --lookup UPS-001",
      "expected": "returns Phase Definition Overview section"
    },
    {
      "test_id": "AT-1D-004",
      "description": "Can find all references to a section",
      "command": "python src/spec_resolver.py --find-refs UPS-001",
      "expected": "returns list of referencing sections"
    },
    {
      "test_id": "AT-1D-005",
      "description": "Unit tests pass",
      "command": "pytest tests/test_spec_resolver.py -v",
      "expected": "all tests pass (>= 10 tests)"
    }
  ],
  "deliverables": [
    "src/spec_resolver.py with parse, validate, lookup, find-refs functions",
    "tests/test_spec_resolver.py with comprehensive test coverage"
  ],
  "estimated_effort_hours": 8,
  "risk_level": "medium",
  "notes": "Critical for maintaining spec integrity across future edits"
}
