{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "glossary_sync.schema.json",
  "title": "Glossary Sync Pattern Instance",
  "description": "Schema for glossary_sync pattern instances - sync glossary with codebase",
  "type": "object",
  "required": [
    "pattern_id",
    "doc_id",
    "inputs"
  ],
  "properties": {
    "pattern_id": {
      "type": "string",
      "const": "PAT-GLOSSARY-SYNC-001",
      "description": "Pattern identifier for glossary sync"
    },
    "doc_id": {
      "type": "string",
      "const": "DOC-GLOSSARY-SYNC-001",
      "pattern": "^DOC-[A-Z0-9-]+$",
      "description": "Document ID for this pattern"
    },
    "inputs": {
      "type": "object",
      "required": [
        "project_root",
        "scan_paths"
      ],
      "properties": {
        "project_root": {
          "type": "string",
          "description": "Root directory of the project"
        },
        "scan_paths": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "minItems": 1,
          "description": "Paths to scan for term usage"
        },
        "exclude_patterns": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": [
            "tests/",
            "__pycache__/",
            ".venv/",
            "node_modules/"
          ],
          "description": "Patterns to exclude from scanning"
        },
        "suggest_new_terms": {
          "type": "boolean",
          "default": true,
          "description": "Suggest new terms from code comments"
        },
        "check_implementation_paths": {
          "type": "boolean",
          "default": true,
          "description": "Verify implementation file paths exist"
        }
      }
    },
    "outputs": {
      "type": "object",
      "properties": {
        "status": {
          "type": "string",
          "enum": [
            "success",
            "failure",
            "warnings"
          ],
          "description": "Execution status"
        },
        "missing_terms": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Terms referenced in code but not in glossary"
        },
        "stale_terms": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "term_id": {
                "type": "string"
              },
              "name": {
                "type": "string"
              },
              "reason": {
                "type": "string"
              }
            }
          },
          "description": "Terms in glossary but not found in code"
        },
        "suggested_terms": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "definition": {
                "type": "string"
              },
              "source_file": {
                "type": "string"
              },
              "confidence": {
                "type": "number"
              }
            }
          },
          "description": "Suggested new terms from code analysis"
        },
        "invalid_paths": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "term_id": {
                "type": "string"
              },
              "path": {
                "type": "string"
              }
            }
          },
          "description": "Implementation paths that don't exist"
        },
        "files_scanned": {
          "type": "integer",
          "description": "Number of files scanned"
        },
        "execution_duration_seconds": {
          "type": "number",
          "description": "Total execution time"
        },
        "errors": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "List of errors encountered"
        }
      }
    }
  },
  "doc_id": "DOC-PAT-GLOSSARY-SYNC-SCHEMA-118"
}
