{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "integration_hook",
  "description": "Add non-invasive hooks to existing code for telemetry, logging, or monitoring.\nCreates wrapper modules that integrate with existing systems without modifying\ncore logic.\n\nThis pattern enforces:\n- Minimal, non-invasive instrumentation\n- Fault-tolerant hooks (never fail the main operation)\n- Singleton pattern for hook instances\n- Documentation of integration points\n",
  "type": "object",
  "properties": {
    "integration_name": {
      "type": "string",
      "required": true,
      "description": "Name of the integration (e.g., 'pattern_automation_hooks')",
      "example": "pattern_automation_hooks"
    },
    "target_module_path": {
      "type": "string",
      "required": true,
      "description": "Path to module that will be instrumented",
      "example": "core/engine/orchestrator.py"
    },
    "hook_points": {
      "type": "array",
      "required": true,
      "description": "List of hook points to instrument",
      "items": {
        "type": "object",
        "required": [
          "name",
          "trigger"
        ],
        "properties": {
          "name": {
            "type": "string",
            "description": "Name of hook point",
            "example": "on_task_complete"
          },
          "trigger": {
            "type": "string",
            "enum": [
              "before",
              "after",
              "error"
            ],
            "description": "When to trigger the hook"
          },
          "target_function": {
            "type": "string",
            "description": "Function to hook into",
            "example": "execute_task"
          },
          "parameters": {
            "type": "array",
            "description": "Parameters passed to hook",
            "items": {
              "type": "string"
            }
          },
          "actions": {
            "type": "array",
            "description": "Actions to perform when hook triggers",
            "items": {
              "type": "string"
            }
          }
        }
      }
    },
    "hook_module_path": {
      "type": "string",
      "required": true,
      "description": "Path where hook module will be created",
      "example": "automation/integration/orchestrator_hooks.py"
    },
    "database_path": {
      "type": "string",
      "required": false,
      "description": "Path to database for hook data storage",
      "example": "patterns/metrics/pattern_automation.db"
    },
    "config_path": {
      "type": "string",
      "required": false,
      "description": "Path to configuration file for hook behavior",
      "example": "automation/config/detection_config.yaml"
    },
    "include_tests": {
      "type": "boolean",
      "default": true,
      "description": "Whether to generate unit tests for hooks"
    }
  },
  "required": [
    "integration_name",
    "target_module_path",
    "hook_points",
    "hook_module_path"
  ]
}