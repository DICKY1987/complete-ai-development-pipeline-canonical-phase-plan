# config/decomposition_rules.yaml
#
# This file provides a placeholder for future automated workstream decomposition rules.
# The rules defined here are NOT yet enforced by the planner stub (src/pipeline/planner.py)
# but serve as an example of how such rules might be structured for v2.0 automation.

# Grouping rules:
# Define how changes might be grouped into individual workstreams.
group_by:
  language:
    - python:
        description: "Group changes related to Python files (e.g., src/**/*.py, tests/**/*.py)"
        patterns:
          - "src/**/*.py"
          - "tests/**/*.py"
    - powershell:
        description: "Group changes related to PowerShell scripts (e.g., scripts/**/*.ps1)"
        patterns:
          - "scripts/**/*.ps1"
  directory:
    - pipeline_core:
        description: "Group changes within the core pipeline directory"
        patterns:
          - "src/pipeline/**/*"
    - documentation:
        description: "Group changes within the documentation directory"
        patterns:
          - "docs/**/*"

# Workstream size limits:
# Define constraints on the size or complexity of individual workstreams.
workstream_limits:
  max_files_per_workstream: 10
  max_tasks_per_workstream: 7
  max_lines_changed_per_workstream: 50 # Example heuristic

# Dependency inference rules:
# Rules for automatically inferring 'depends_on' relationships.
dependency_inference:
  api_changes_first:
    description: "Backend API changes should precede frontend integration."
    if_files_changed:
      - "src/backend/api/**/*.py"
    then_depends_on_workstreams_changing:
      - "src/frontend/**/*.js"

# Example of how to prioritize certain types of workstreams
prioritization:
  bug_fixes:
    keywords: ["bug", "fix", "error"]
    priority_score: 100
  performance_optimizations:
    keywords: ["perf", "optimize", "speed"]
    priority_score: 80

# Note: These rules are for documentation and future implementation.
# The current planner stub does not actively use them.
