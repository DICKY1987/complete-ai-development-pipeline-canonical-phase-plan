{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "glossary_link_check.schema.json",
  "title": "Glossary Link Check Pattern Instance",
  "description": "Schema for glossary_link_check pattern instances - validate cross-references and links",
  "type": "object",
  "required": [
    "pattern_id",
    "doc_id",
    "inputs"
  ],
  "properties": {
    "pattern_id": {
      "type": "string",
      "const": "PAT-GLOSSARY-LINK-CHECK-001",
      "description": "Pattern identifier for link checking"
    },
    "doc_id": {
      "type": "string",
      "const": "DOC-GLOSSARY-LINK-CHECK-001",
      "pattern": "^DOC-[A-Z0-9-]+$",
      "description": "Document ID for this pattern"
    },
    "inputs": {
      "type": "object",
      "required": [
        "project_root"
      ],
      "properties": {
        "project_root": {
          "type": "string",
          "description": "Root directory of the project"
        },
        "check_term_references": {
          "type": "boolean",
          "default": true,
          "description": "Check term_id cross-references"
        },
        "check_file_paths": {
          "type": "boolean",
          "default": true,
          "description": "Verify implementation file paths exist"
        },
        "check_schema_refs": {
          "type": "boolean",
          "default": true,
          "description": "Verify schema file references exist"
        },
        "check_related_terms": {
          "type": "boolean",
          "default": true,
          "description": "Validate related term links"
        },
        "fail_on_broken_links": {
          "type": "boolean",
          "default": false,
          "description": "Treat broken links as errors"
        }
      }
    },
    "outputs": {
      "type": "object",
      "properties": {
        "status": {
          "type": "string",
          "enum": ["success", "warnings", "failure"],
          "description": "Execution status"
        },
        "total_links_checked": {
          "type": "integer",
          "description": "Total number of links validated"
        },
        "broken_links": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "term_id": { "type": "string" },
              "link_type": { "type": "string" },
              "target": { "type": "string" },
              "error": { "type": "string" }
            }
          },
          "description": "List of broken links found"
        },
        "warnings": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Non-critical issues found"
        },
        "execution_duration_seconds": {
          "type": "number",
          "description": "Total execution time"
        },
        "errors": {
          "type": "array",
          "items": { "type": "string" },
          "description": "List of errors encountered"
        }
      }
    }
  }
}
