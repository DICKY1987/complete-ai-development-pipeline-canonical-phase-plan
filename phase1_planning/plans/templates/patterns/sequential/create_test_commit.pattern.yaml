doc_id: DOC-PAT-CREATE-TEST-COMMIT-PATTERN-097
# Pattern: Create → Test → Commit Workflow
# Extracted from: TDD and atomic commit patterns
# Proven uses: 40+ (estimated from test-driven workflows)

pattern_id: "sequential_create_test_commit_v1"
category: "file_creation"

description: "Sequential workflow: create code → verify tests → commit atomically"
use_case: "Use for test-driven development with atomic commits"
time_savings: "35% time savings through integrated workflow"

# Pre-made structural decisions
structural_decisions:
  tool_sequence: ["create", "powershell", "powershell"]
  proven_frequency: 40
  no_placeholders: true
  include_error_handling: true
  execution_mode: "sequential"
  always_test_before_commit: true

# Execution steps
execution_steps:
  1_create:
    tool: "create"
    purpose: "Create implementation and test files"
    files:
      - implementation: "${impl_file}"
      - test: "${test_file}"
    validation: "syntax_check"
  
  2_test:
    tool: "powershell"
    command: "python -m pytest ${test_file} -v"
    purpose: "Verify all tests pass"
    expect_pattern: ".*passed.*0 failed.*"
    on_fail: "enter_fix_loop"
  
  3_commit:
    tool: "powershell"
    command: "git add ${files} && git commit -m '${commit_msg}'"
    purpose: "Commit atomic unit"
    only_if: "tests_passed"

# Ground truth verification
ground_truth:
  success_criteria:
    - "All files created successfully"
    - "All tests pass on first run"
    - "Changes committed to git"
    - "Working directory clean"

# Sequential workflow metadata
workflow:
  sequence_length: 3
  avg_duration: 60.0
  atomic_unit: true
  rollback_on_failure: true
  
# Example usage
example:
  context:
    impl_file: "src/validator.py"
    test_file: "tests/test_validator.py"
    commit_msg: "feat: Add input validator"
  
  steps_executed:
    - "create src/validator.py + tests/test_validator.py"
    - "pytest tests/test_validator.py"
    - "git commit -m 'feat: Add input validator'"
  
  expected_duration: "60 seconds"
  expected_outcome:
    - "Validator created"
    - "Tests pass"
    - "Committed successfully"

# Metadata
meta:
  created_at: "2025-11-23"
  version: "1.0.0"
  based_on: "TDD workflow pattern analysis"
  proven_uses: 40
  avg_duration_seconds: 60.0
  time_savings_percent: "35%"
