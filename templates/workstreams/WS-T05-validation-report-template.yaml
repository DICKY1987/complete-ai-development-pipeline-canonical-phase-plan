# Workstream: Validation Report Template
workstream_id: WS-T05
title: Validation Report Template
pattern: EXEC-001
track: Track 2 - Process & Configuration Templates
agent: codex-agent-2

metadata:
  priority: HIGH
  complexity: LOW
  time_estimate_hours: 2
  dependencies: []
  blocked_by: []
  blocks: [WS-T13]

description: |
  Create reusable Markdown template for validation reports with:
  - Executive summary section
  - Phase-by-phase breakdown tables
  - Verification results
  - Action items and next steps
  - Troubleshooting guidance
  
  Based on existing reports (240-339 lines).

execution_request:
  tool_id: codex-cli
  worktree: .worktrees/track-2
  constraints:
    file_scope:
      allowed_paths:
        - templates/validation_report.template.md
        - templates/_schema/validation_report.schema.json
        - templates/_examples/validation_report.example.json
      forbidden_paths:
        - core/**
        - error/**
        - .git/**
  
  prompt: |
    Create a validation report Markdown template following EXEC-001 pattern.
    
    INPUTS:
    1. Analyze existing reports:
       - C:\Users\richg\.claude\file-history\8b7dc525-52d5-4614-84a5-6077f14ab2b5\214669e611dd24f9@v2
       - C:\Users\richg\.claude\file-history\8b7dc525-52d5-4614-84a5-6077f14ab2b5\88a587f347b39429@v2
    2. Extract common structure and sections
    
    OUTPUTS:
    1. templates/_schema/validation_report.schema.json
       - Define variables: {title}, {status}, {phases}, {tools}, {metrics}
       - JSON Schema format
    
    2. templates/validation_report.template.md
       - Jinja2 template with placeholders
       - Include: Executive summary, phase breakdown, verification, next steps
       - Support: Tables, checkmarks, status emojis
    
    3. templates/_examples/validation_report.example.json
       - Sample variables for installation report
       - Test data with multiple phases
    
    GROUND TRUTH GATES:
    - Schema validates against JSON Schema meta-schema
    - Template syntax is valid Jinja2
    - Rendered output is valid Markdown
    - Tables render correctly

validation_gates:
  gate_1_schema_valid:
    command: python -c "import json, jsonschema; schema=json.load(open('templates/_schema/validation_report.schema.json')); jsonschema.Draft7Validator.check_schema(schema)"
    expect_exit_code: 0
    failure_action: halt_and_report
  
  gate_2_template_syntax:
    command: python -c "from jinja2 import Template; Template(open('templates/validation_report.template.md').read())"
    expect_exit_code: 0
    failure_action: halt_and_report
  
  gate_3_renders_successfully:
    command: python tools/render_template.py templates/validation_report.template.md templates/_examples/validation_report.example.json --output test_report.md
    expect_exit_code: 0
    failure_action: halt_and_report
  
  gate_4_markdown_valid:
    command: python -c "import markdown; markdown.markdown(open('test_report.md').read())"
    expect_exit_code: 0
    failure_action: halt_and_report

acceptance_criteria:
  - Variable schema includes all report sections
  - Template renders without errors
  - Generated Markdown is syntactically valid
  - Tables format correctly
  - Status emojis display properly
  - Next steps section is actionable

rollback_strategy:
  checkpoint_before: true
  rollback_command: git worktree remove --force .worktrees/track-2
  recovery_steps:
    - Delete .worktrees/track-2
    - Remove any created files in templates/

telemetry:
  track:
    - template_creation_time
    - schema_validation_result
    - render_test_result
    - markdown_validation_result
  output: .execution/telemetry/ws-t05.jsonl
